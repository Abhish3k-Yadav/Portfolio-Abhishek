const hamburger = document.querySelector('.hamburger'),
  navMenu = document.querySelector('.nav-menu');
if (hamburger && navMenu) {
  hamburger.addEventListener('click', mobileMenu);
}
function mobileMenu() {
  hamburger.classList.toggle('active');
  navMenu.classList.toggle('active');
}
const navLink = document.querySelectorAll('.nav-link');
if (navLink.length > 0) {
  navLink.forEach((n) => n.addEventListener('click', closeMenu));
}
function closeMenu() {
  hamburger.classList.remove('active');
  navMenu.classList.remove('active');
}
const toggleSwitch = document.querySelector(
  '.theme-switch input[type="checkbox"]'
);
function switchTheme(e) {
  if (e.target.checked) {
    document.documentElement.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', 'dark');
  } else {
    document.documentElement.setAttribute('data-theme', 'light');
    localStorage.setItem('theme', 'light');
  }
}
if (toggleSwitch) {
  toggleSwitch.addEventListener('change', switchTheme, !1);
}
const currentTheme = localStorage.getItem('theme')
  ? localStorage.getItem('theme')
  : null;
if (currentTheme) {
  document.documentElement.setAttribute('data-theme', currentTheme);
  if (currentTheme === 'dark' && toggleSwitch) {
    toggleSwitch.checked = !0;
  }
}
const myDate = document.querySelector('#datee');
if (myDate) {
  const yes = new Date().getFullYear();
  myDate.innerHTML = yes;
}
(function () {
  try {
    if (
      typeof window !== 'undefined' &&
      window.emailjs &&
      typeof window.emailjs.init === 'function'
    ) {
      window.emailjs.init('803FUsH0aLDHvIrwq');
    }
  } catch (e) {
    console.debug('EmailJS init skipped:', e);
  }
})();
const contactForm = document.getElementById('contact-form'),
  formMessage = document.getElementById('form-message'),
  submitBtn = document.getElementById('submit-btn'),
  btnText = document.querySelector('.btn-text'),
  btnLoading = document.querySelector('.btn-loading');
function isValidEmail(e) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);
}
function showMessage(e, t) {
  formMessage.textContent = e;
  formMessage.className = `form-message ${t}`;
  formMessage.style.display = 'block';
  setTimeout(() => {
    formMessage.style.display = 'none';
  }, 5e3);
}
function showLoading() {
  submitBtn.disabled = !0;
  btnText.style.display = 'none';
  btnLoading.style.display = 'inline';
}
function hideLoading() {
  submitBtn.disabled = !1;
  btnText.style.display = 'inline';
  btnLoading.style.display = 'none';
}
if (contactForm) {
  contactForm.addEventListener('submit', function (e) {
    e.preventDefault();
    const t = document.getElementById('name').value.trim(),
      n = document.getElementById('email').value.trim(),
      s = document.getElementById('subject').value.trim(),
      o = document.getElementById('message').value.trim();
    if (!t || !n || !s || !o) {
      showMessage('Please fill in all fields.', 'error');
      return;
    }
    if (!isValidEmail(n)) {
      showMessage('Please enter a valid email address.', 'error');
      return;
    }
    showLoading();
    if (
      !(
        typeof emailjs !== 'undefined' && typeof emailjs.sendForm === 'function'
      )
    ) {
      showMessage(
        'Email service unavailable. Please try again later or email me directly.',
        'error'
      );
      hideLoading();
      return;
    }
    emailjs
      .sendForm('service_xre8jr9', 'template_3c5r7z9', contactForm)
      .then(
        function (e) {
          console.log('SUCCESS!', e.status, e.text);
          showMessage(
            "✅ Message sent successfully! I'll get back to you soon.",
            'success'
          );
          contactForm.reset();
        },
        function (e) {
          console.log('FAILED...', e);
          showMessage(
            '❌ Failed to send message. Please try again or contact me directly.',
            'error'
          );
        }
      )
      .finally(function () {
        hideLoading();
      });
  });
}
document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const t = document.querySelector(this.getAttribute('href'));
    t && t.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });
});
document.addEventListener('DOMContentLoaded', function () {
  if ('undefined' != typeof AOS) {
    const e = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    AOS.init({
      duration: e ? 0 : 800,
      easing: 'ease-out',
      once: !0,
      offset: 80,
      delay: e ? 0 : 40,
      throttleDelay: 50,
      debounceDelay: 50,
      startEvent: 'DOMContentLoaded',
    });
  }
});
const initCounters = () => {
  const e = document.querySelectorAll('.counter'),
    t = 1600,
    n = (n) => {
      const s = parseInt(n.getAttribute('data-target')),
        o = Math.max(1, s / (t / 16));
      let a = 0;
      const i = () => {
        if (((a += o), a < s)) {
          n.textContent = Math.ceil(a) + '+';
          requestAnimationFrame(i);
        } else n.textContent = s + '+';
      };
      i();
    };
  const s = new IntersectionObserver(
    (e) => {
      e.forEach((e) => {
        if (e.isIntersecting) {
          const t = e.target;
          n(t);
          s.unobserve(t);
        }
      });
    },
    { threshold: 0.5 }
  );
  e.forEach((e) => s.observe(e));
};
'requestIdleCallback' in window
  ? requestIdleCallback(initCounters, { timeout: 2e3 })
  : setTimeout(initCounters, 500);
const scrollTopBtn = document.createElement('button');
scrollTopBtn.innerHTML = '<i class="fas fa-arrow-up"></i>';
scrollTopBtn.className = 'scroll-top-btn';
scrollTopBtn.setAttribute('aria-label', 'Scroll to top');
document.body.appendChild(scrollTopBtn);
let scrollTimeout;
window.addEventListener(
  'scroll',
  () => {
    clearTimeout(scrollTimeout);
    scrollTimeout = setTimeout(() => {
      window.pageYOffset > 300
        ? scrollTopBtn.classList.add('visible')
        : scrollTopBtn.classList.remove('visible');
    }, 100);
  },
  { passive: !0 }
);
scrollTopBtn.addEventListener('click', () => {
  window.scrollTo({ top: 0, behavior: 'smooth' });
});
let ticking = !1;
window.addEventListener(
  'scroll',
  () => {
    ticking ||
      (window.requestAnimationFrame(() => {
        ticking = !1;
      }),
      (ticking = !0));
  },
  { passive: !0 }
);
const heroSubtitle = document.querySelector('.hero-subtitle');
if (heroSubtitle) {
  const e = heroSubtitle.textContent.trim(),
    t = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (e.length) {
    if (t) heroSubtitle.textContent = e;
    else {
      heroSubtitle.textContent = '';
      heroSubtitle.setAttribute('aria-label', e);
      const t = 85,
        n = 1400;
      let s = 0,
        o;
      const a = () => {
        if (s <= e.length) {
          heroSubtitle.textContent = e.slice(0, s);
          s += 1;
          o = setTimeout(a, t);
        } else
          setTimeout(() => {
            heroSubtitle.textContent = '';
            s = 0;
            o = setTimeout(a, t);
          }, n);
      };
      setTimeout(a, 400);
      document.addEventListener('visibilitychange', () => {
        document.hidden && o && clearTimeout(o);
      });
    }
  }
}
